<!DOCTYPE html>
<html lang="el">
<head>
    <script src="libs/NoSleep.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title">Î•ÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ Ï€ÏÎ¿Ï‚ ÎŸÎ¼Î¹Î»Î·Ï„Î­Ï‚</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #a2b2c2;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
            background: rgb(187, 214, 245);
            border-radius: 0;
            box-shadow: none;
            overflow: hidden;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-logo-container {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: calc(min(12vw, 60px)); /* Smaller max size to prevent spill */
            height: calc(min(12vw, 60px)); /* Same height as width */
            max-width: 60px;
            max-height: 60px;
            min-width: 35px;
            min-height: 35px;
        }

        .header-content {
            flex: 1;
            text-align: center;
            margin-left: calc(min(12vw, 60px) + 20px); /* Logo width + position from left */
            margin-right: 20px; /* Right position from edge */
            padding: 0; /* Remove any default padding */
        }

        .header h1 {
            font-size: 20px;
            margin: 0; /* Remove all margins */
            padding: 0; /* Remove all padding */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 14px;
            margin: 0;
        }

        .form-container {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        input[type="text"],
        input[type="email"],
        select,
        textarea {
            width: 100%;
            padding: 10px 14px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #2c3e50;
            background: white;
            box-shadow: 0 0 0 3px rgba(44, 62, 80, 0.1);
        }

        select {
            cursor: pointer;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
        }

        .submit-btn {
            width: 100%;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            border: none;
            padding: 14px 18px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(44, 62, 80, 0.3);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .required {
            color: #e74c3c;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #c3e6cb;
            display: none;
        }

        .char-counter {
            text-align: right;
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        @media (max-width: 600px) {
            .container {
                margin: 0;
                border-radius: 0;
            }
            
            .header {
                padding: 15px;
            }
            
            .header-logo-container {
                left: 15px; /* Closer to edge on mobile */
            }
            
            .header-content {
                margin-left: calc(min(12vw, 60px) + 15px); /* Logo width + position on mobile */
                margin-right: 15px; /* Edge position on mobile */
            }
            
            /* Language selector mobile adjustments */
            .language-selector {
                right: 15px !important; /* Closer to edge on mobile */
                gap: 6px !important; /* Smaller gap on mobile */
            }
            
            .lang-flag {
                font-size: 20px !important; /* Smaller flags on mobile */
            }
            
            .form-container {
                padding: 15px;
            }
        }

        /* Autocomplete Styles Î³Î¹Î± Î“Î•ÎœÎ— API */
        .autocomplete-container {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .autocomplete-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e1e5e9;
            border-top: none;
            border-radius: 0 0 12px 12px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: none;
        }

        .autocomplete-item {
            padding: 12px 14px;
            cursor: pointer;
            border-bottom: 1px solid #f1f3f4;
            transition: background-color 0.2s ease;
        }

        .autocomplete-item:hover,
        .autocomplete-item.highlighted {
            background-color: #f8f9fa;
        }

        .autocomplete-item:last-child {
            border-bottom: none;
        }

        .company-name {
            font-weight: 600;
            color: #2c3e50;
            font-size: 14px;
        }

        .company-source {
            font-weight: 400;
            color: #7f8c8d;
            font-size: 11px;
            margin-left: 8px;
        }

        .company-details {
            color: #666;
            font-size: 12px;
            margin-top: 2px;
        }

        .loading-indicator {
            padding: 12px 14px;
            text-align: center;
            color: #666;
            font-style: italic;
        }

        .no-results {
            padding: 12px 14px;
            text-align: center;
            color: #999;
            font-style: italic;
        }
    </style>
</head>
<body>
    <!-- Right-click context menu -->
    <div id="contextMenu" style="position: fixed; background: #2c3e50; border: 1px solid #34495e; border-radius: 4px; padding: 8px 0; display: none; z-index: 9999; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">
        <div id="setPcName" style="padding: 8px 16px; cursor: pointer; color: white; font-size: 14px; transition: background 0.2s;" onmouseover="this.style.background='#34495e'" onmouseout="this.style.background='transparent'">
            ğŸ’» Set PC Name
        </div>
    </div>
    
    <!-- Custom input dialog -->
    <div id="pcNameDialog" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: none; z-index: 10000; justify-content: center; align-items: center;">
        <div style="background: #2c3e50; padding: 20px; border-radius: 8px; color: white; text-align: center; box-shadow: 0 4px 20px rgba(0,0,0,0.5);">
            <h3 style="margin-top: 0; color: #ecf0f1;">ğŸ’» ÎŒÎ½Î¿Î¼Î± Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÏ„Î®</h3>
            <input type="text" id="pcNameInput" style="width: 200px; padding: 8px; margin: 10px 0; border: none; border-radius: 4px; font-size: 16px; text-align: center;" placeholder="Ï€.x. ASUS">
            <div style="margin-top: 15px;">
                <button id="pcNameOk" style="background: #27ae60; color: white; border: none; padding: 8px 16px; margin: 0 5px; border-radius: 4px; cursor: pointer; font-size: 14px;">OK</button>
                <button id="pcNameCancel" style="background: #e74c3c; color: white; border: none; padding: 8px 16px; margin: 0 5px; border-radius: 4px; cursor: pointer; font-size: 14px;">Î‘ÎºÏÏÏ‰ÏƒÎ·</button>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="header">
            <div class="header-logo-container">
                <div id="header-logo" style="width: 100%; height: 100%; background-size: contain; background-repeat: no-repeat; background-position: center; display: none;"></div>
            </div>
            <div class="header-content">
                <h1 id="conference-title">TimeCastâ„¢ Pro</h1>
            </div>
        </div>

        <!-- Language Selector - Two Rows -->
        <div class="language-selector" style="
            text-align: center;
            padding: 15px 0;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            margin: 0 auto;
            max-width: 900px;
            border-radius: 15px;
            margin-top: 10px;
            margin-bottom: 10px;
        ">
            <!-- First Row - 12 languages -->
            <div style="
                display: flex;
                justify-content: space-evenly;
                align-items: center;
                margin-bottom: 10px;
                flex-wrap: wrap;
                padding: 0 20px;
            ">
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('el')" title="Î•Î»Î»Î·Î½Î¹ÎºÎ¬">ğŸ‡¬ğŸ‡·</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('en')" title="English">ğŸ‡ºğŸ‡¸</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('fr')" title="FranÃ§ais">ğŸ‡«ğŸ‡·</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('de')" title="Deutsch">ğŸ‡©ğŸ‡ª</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('es')" title="EspaÃ±ol">ğŸ‡ªğŸ‡¸</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('it')" title="Italiano">ğŸ‡®ğŸ‡¹</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('da')" title="Dansk">ğŸ‡©ğŸ‡°</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('uk')" title="Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°">ğŸ‡ºğŸ‡¦</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('nl')" title="Nederlands">ğŸ‡³ğŸ‡±</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('pt')" title="PortuguÃªs">ğŸ‡µğŸ‡¹</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('ro')" title="RomÃ¢nÄƒ">ğŸ‡·ğŸ‡´</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('hr')" title="Hrvatski">ğŸ‡­ğŸ‡·</div>
            </div>
            
            <!-- Second Row - 12 languages -->
            <div style="
                display: flex;
                justify-content: space-evenly;
                align-items: center;
                flex-wrap: wrap;
                padding: 0 20px;
            ">
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('pl')" title="Polski">ğŸ‡µğŸ‡±</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('lv')" title="LatvieÅ¡u">ğŸ‡±ğŸ‡»</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('sl')" title="SlovenÅ¡Äina">ğŸ‡¸ğŸ‡®</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('et')" title="Eesti">ğŸ‡ªğŸ‡ª</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('fi')" title="Suomi">ğŸ‡«ğŸ‡®</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('sv')" title="Svenska">ğŸ‡¸ğŸ‡ª</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('cs')" title="ÄŒeÅ¡tina">ğŸ‡¨ğŸ‡¿</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('hu')" title="Magyar">ğŸ‡­ğŸ‡º</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('lt')" title="LietuviÅ³">ğŸ‡±ğŸ‡¹</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('sk')" title="SlovenÄina">ğŸ‡¸ğŸ‡°</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('bg')" title="Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸">ğŸ‡§ğŸ‡¬</div>
                <div class="lang-flag" style="cursor: pointer; font-size: 24px; opacity: 0.7; transition: opacity 0.2s, transform 0.2s; user-select: none;" onclick="switchLanguage('mt')" title="Malti">ğŸ‡²ğŸ‡¹</div>
            </div>
        </div>

        <div class="form-container">
            <p style="text-align: center; margin-bottom: 20px; color: #555; font-size: 16px; font-weight: 500;" data-i18n="subtitle">
                Î¥Ï€Î¿Î²Î¬Î»ÎµÏ„Îµ Ï„Î·Î½ ÎµÏÏÏ„Î·ÏƒÎ® ÏƒÎ±Ï‚
            </p>
            
            <div class="success-message" id="successMessage" data-i18n="successMessage">
                âœ… Î— ÎµÏÏÏ„Î·ÏƒÎ® ÏƒÎ±Ï‚ Ï…Ï€Î¿Î²Î»Î®Î¸Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚! Î˜Î± ÎµÎ¾ÎµÏ„Î±ÏƒÏ„ÎµÎ¯ Î±Ï€ÏŒ Ï„Î· Î´Î¹Î¿ÏÎ³Î¬Î½Ï‰ÏƒÎ·.
            </div>

            <form id="questionForm">
                <div class="form-group">
                    <label for="name" data-i18n="labels.name">ÎŒÎ½Î¿Î¼Î± <span class="required">*</span></label>
                    <input type="text" id="name" name="name" required>
                </div>

                <div class="form-group">
                    <label for="company" data-i18n="labels.company">Î•Ï„Î±Î¹ÏÎµÎ¯Î± <span class="required">*</span></label>
                    <div class="autocomplete-container">
                        <input type="text" id="company" name="company" required placeholder="Î Î»Î·ÎºÏ„ÏÎ¿Î»Î¿Î³Î®ÏƒÏ„Îµ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± Ï„Î·Ï‚ ÎµÏ„Î±Î¹ÏÎµÎ¯Î±Ï‚..." data-i18n-placeholder="placeholders.company">
                        <div id="autocomplete-dropdown" class="autocomplete-dropdown"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="department" data-i18n="labels.department">Î¤Î¼Î®Î¼Î±</label>
                    <input type="text" id="department" name="department" placeholder="Ï€.Ï‡. Î›Î¿Î³Î¹ÏƒÏ„Î®ÏÎ¹Î¿, Î Ï‰Î»Î®ÏƒÎµÎ¹Ï‚" data-i18n-placeholder="placeholders.department">
                </div>

                <div class="form-group">
                    <label for="email" data-i18n="labels.email">E-Mail</label>
                    <input type="email" id="email" name="email" placeholder="Î‘Î½ Ï„Î¿ ÎµÏÏÏ„Î·Î¼Î± ÏƒÎ±Ï‚ Î´ÎµÎ½ Î±Ï€Î±Î½Ï„Î·Î¸ÎµÎ¯ Ï€ÏÎ¿Ï†Î¿ÏÎ¹ÎºÎ¬" data-i18n-placeholder="placeholders.email">
                </div>

                <div class="form-group">
                    <label for="targetSpeaker" data-i18n="labels.targetSpeaker">Î•ÏÏÏ„Î·ÏƒÎ· Ï€ÏÎ¿Ï‚ <span class="required">*</span></label>
                    <select id="targetSpeaker" name="targetSpeaker" required>
                        <option value="" data-i18n="options.loadingSpeakers">â³ Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î¿Î¼Î¹Î»Î·Ï„ÏÎ½...</option>
                        <option value="Î“Î¹Î¬Î½Î½Î·Ï‚ Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚">Î“Î¹Î¬Î½Î½Î·Ï‚ Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚</option>
                        <option value="Î”Î·Î¼Î®Ï„ÏÎ·Ï‚ Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚">Î”Î·Î¼Î®Ï„ÏÎ·Ï‚ Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚</option>
                        <option value="ÎœÎ±ÏÎ¯Î± ÎšÏ‰Î½ÏƒÏ„Î±Î½Ï„Î¯Î½Î¿Ï…">ÎœÎ±ÏÎ¯Î± ÎšÏ‰Î½ÏƒÏ„Î±Î½Ï„Î¯Î½Î¿Ï…</option>
                        <option value="ÎÎ¯ÎºÎ¿Ï‚ Î‘Î½Ï„Ï‰Î½Î¯Î¿Ï…">ÎÎ¯ÎºÎ¿Ï‚ Î‘Î½Ï„Ï‰Î½Î¯Î¿Ï…</option>
                        <option value="Î†Î½Î½Î± Î“ÎµÏ‰ÏÎ³Î¯Î¿Ï…">Î†Î½Î½Î± Î“ÎµÏ‰ÏÎ³Î¯Î¿Ï…</option>
                        <option value="Î“ÎµÎ½Î¹ÎºÎ® Î•ÏÏÏ„Î·ÏƒÎ· (ÎŒÎ»Î¿Î¹)" data-i18n="options.generalQuestion">Î“ÎµÎ½Î¹ÎºÎ® Î•ÏÏÏ„Î·ÏƒÎ· (ÎŒÎ»Î¿Î¹)</option>
                    </select>
                </div>



                <div class="form-group">
                    <label for="subject" data-i18n="labels.subject">Î˜Î­Î¼Î± <span class="required">*</span></label>
                    <input type="text" id="subject" name="subject" placeholder="Ï€.Ï‡. Î”Î±Ï€Î¬Î½ÎµÏ‚ Î‘Î½Î±Î»Ï‰ÏƒÎ¯Î¼Ï‰Î½" data-i18n-placeholder="placeholders.subject" required>
                </div>

                <div class="form-group">
                    <label for="question" data-i18n="labels.question">ÎšÎµÎ¯Î¼ÎµÎ½Î¿ Î•ÏÏÏ„Î·ÏƒÎ·Ï‚ <span class="required">*</span></label>
                    <textarea id="question" name="question" placeholder="Ï€.Ï‡. Î ÏÏ‚ ÎºÎ¬Î½Î¿Ï…Î¼Îµ Î±Î½Ï„Î¹Î»Î¿Î³Î¹ÏƒÎ¼Î¿ÏÏ‚ Î³Î¹Î± Ï„Î± Î±Î½Î±Î»ÏÏƒÎ¹Î¼Î± Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ ÏƒÏ„Î·Î½ Ï€Î±ÏÎ±Î³Ï‰Î³Î®;" data-i18n-placeholder="placeholders.questionText" required maxlength="1500"></textarea>
                    <div class="char-counter">
                        <span id="charCount">0</span>/1500 <span data-i18n="charCounter">Ï‡Î±ÏÎ±ÎºÏ„Î®ÏÎµÏ‚</span>
                    </div>
                </div>

                <button type="submit" class="submit-btn" data-i18n="submitButton">
                    ğŸ“¤ Î¥Ï€Î¿Î²Î¿Î»Î® Î•ÏÏÏ„Î·ÏƒÎ·Ï‚
                </button>
            </form>
        </div>
    </div>
<script src="/socket.io/socket.io.js"></script>

    <script>
        // Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î¿Î¼Î¹Î»Î·Ï„ÏÎ½ Î±Ï€ÏŒ Ï„Î¿ API
        async function loadSpeakers() {
    const select = document.getElementById('targetSpeaker');
    
    // Fallback Î±Î½ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Ï„Î¿ element
    if (!select) {
        console.error('âŒ Speaker select element not found');
        return;
    }
    
    try {
        const response = await fetch('/api/questions/speakers');
        const data = await response.json();
        
        const selectSpeakerText = window.i18next ? window.i18next.t('options.selectSpeaker') : 'Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¿Î¼Î¹Î»Î·Ï„Î®...';
        select.innerHTML = `<option value="">${selectSpeakerText}</option>`;
        
        if (data.success && data.speakers) {
            data.speakers.forEach(speaker => {
                const option = document.createElement('option');
                option.value = speaker;
                option.textContent = speaker;
                select.appendChild(option);
            });
            console.log(`âœ… Loaded ${data.speakers.length} speakers from timeline`);
        } else {
            throw new Error('API returned no speakers');
        }
    } catch (error) {
        console.error('âŒ Error loading speakers:', error);
        
        // FALLBACK Î¼Îµ custom dialog
        const selectSpeakerText = window.i18next ? window.i18next.t('options.selectSpeaker') : 'Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¿Î¼Î¹Î»Î·Ï„Î®...';
        select.innerHTML = `<option value="">${selectSpeakerText}</option>`;
        
        const fallbackSpeakers = [
            'Î“ÎµÎ½Î¹ÎºÎ® Î•ÏÏÏ„Î·ÏƒÎ· (ÎŒÎ»Î¿Î¹)',
            'Î“Î¹Î¬Î½Î½Î·Ï‚ Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚',
            'ÎœÎ±ÏÎ¯Î± ÎšÏ‰Î½ÏƒÏ„Î±Î½Ï„Î¯Î½Î¿Ï…',
            'ÎÎ¯ÎºÎ¿Ï‚ Î‘Î»ÎµÎ¾Î¯Î¿Ï…'
        ];
        
        fallbackSpeakers.forEach(speaker => {
            const option = document.createElement('option');
            option.value = speaker;
            option.textContent = speaker;
            select.appendChild(option);
        });
        
        console.warn('âš ï¸ Used fallback speakers due to API error');
        
        // Show custom error dialog instead of alert
        showCustomDialog('âš ï¸ Î£ÏÎ½Î´ÎµÏƒÎ· Î¼Îµ Server', 'Î— ÏƒÏÎ½Î´ÎµÏƒÎ· Î¼Îµ Ï„Î¿Î½ server Î´Î¹Î±ÎºÏŒÏ€Î·ÎºÎµ Ï€ÏÎ¿ÏƒÏ‰ÏÎ¹Î½Î¬. Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ½Ï„Î±Î¹ Ï€ÏÎ¿ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿Î¹ Î¿Î¼Î¹Î»Î·Ï„Î­Ï‚.', 'warning');
    }
}

        // Character counter Î³Î¹Î± textarea
        const questionTextarea = document.getElementById('question');
        const charCount = document.getElementById('charCount');

        questionTextarea.addEventListener('input', function() {
            const currentLength = this.value.length;
            charCount.textContent = currentLength;
            
            if (currentLength > 450) {
                charCount.style.color = '#e74c3c';
            } else {
                charCount.style.color = '#666';
            }
        });

        // Form submission Î¼Îµ API
        document.getElementById('questionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            // Î•Î›Î•Î“Î§ÎŸÎ£ Î‘Î Î¥Î Î‘Î¡Î§ÎŸÎ¥Î Î¤Î‘ ELEMENTS
    const nameEl = document.getElementById('name');
    const companyEl = document.getElementById('company');
    const targetSpeakerEl = document.getElementById('targetSpeaker');
    
    if (!nameEl || !companyEl || !targetSpeakerEl) {
        console.error('âŒ Form elements not found');
        alert('âŒ Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÎ¼Î±Ï‚ - Ï€Î±ÏÎ±ÎºÎ±Î»Ï Î±Î½Î±Î½ÎµÏÏƒÏ„Îµ Ï„Î· ÏƒÎµÎ»Î¯Î´Î±');
        return;
    }
            
            // Î£Ï…Î»Î»Î¿Î³Î® Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Ï†ÏŒÏÎ¼Î±Ï‚
const formData = {
    name: nameEl.value,           // â† Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„Î± ÎµÎ»ÎµÎ³Î¼Î­Î½Î± elements
    company: companyEl.value,     // â† Î±Ï€ÏŒ Ï€Î¬Î½Ï‰
    department: document.getElementById('department')?.value || '',
    email: document.getElementById('email')?.value || '',
    targetSpeaker: targetSpeakerEl.value,
    subject: document.getElementById('subject')?.value || '',
    question: document.getElementById('question')?.value || ''
};

            // Validation
            if (!formData.name || !formData.company || !formData.targetSpeaker || 
                !formData.subject || !formData.question) {
                alert('âš ï¸ Î Î±ÏÎ±ÎºÎ±Î»Ï ÏƒÏ…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ ÏŒÎ»Î± Ï„Î± Ï…Ï€Î¿Ï‡ÏÎµÏ‰Ï„Î¹ÎºÎ¬ Ï€ÎµÎ´Î¯Î±');
                return;
            }

            try {
                // Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® ÏƒÏ„Î¿ API
                const response = await fetch('/api/questions/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();

                if (result.success) {
                    // Î•Ï€Î¹Ï„Ï…Ï‡Î¯Î±
                    document.getElementById('successMessage').style.display = 'block';
                    
                    // Reset form
                    this.reset();
                    charCount.textContent = '0';
                    
                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    
                    console.log('âœ… Question submitted successfully:', result.questionId);
                    
                    // Hide success message after 5 seconds
                    setTimeout(() => {
                        document.getElementById('successMessage').style.display = 'none';
                    }, 5000);
                } else {
                    throw new Error(result.error || 'Î‘Ï€Î¿Ï„Ï…Ï‡Î¯Î± Ï…Ï€Î¿Î²Î¿Î»Î®Ï‚');
                }
                
            } catch (error) {
                console.error('âŒ Submission error:', error);
                alert(`âŒ Î£Ï†Î¬Î»Î¼Î± Ï…Ï€Î¿Î²Î¿Î»Î®Ï‚: ${error.message}`);
            }
        });


        // âœ… Î£Î©Î£Î¤ÎŸ - Ï€ÎµÏÎ¹Î¼Î­Î½ÎµÎ¹ Ï€Î»Î®ÏÎ· Ï†ÏŒÏÏ„Ï‰ÏƒÎ·
document.addEventListener('DOMContentLoaded', function() {
    // Î ÎµÏÎ¹Î¼Î­Î½ÎµÎ¹ Î»Î¯Î³Î¿ Î±ÎºÏŒÎ¼Î± Î³Î¹Î± ÏƒÎ¹Î³Î¿Ï…ÏÎ¹Î¬
    setTimeout(() => {
        console.log('ğŸ” DOM ready, searching for elements...');
        
        
        const select = document.getElementById('targetSpeaker');
        if (select) {
            console.log('âœ… Speaker select found!');
            loadSpeakers();
        } else {
            console.error('âŒ Speaker select still not found after DOM ready');
            // Î”Î¿ÎºÎ¹Î¼Î® Î¾Î±Î½Î¬ ÏƒÎµ 1 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î¿
            setTimeout(() => {
                loadSpeakers();
            }, 1000);
        }
    }, 100);
});
// WebSocket connection Î³Î¹Î± Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î· ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î¿Î¼Î¹Î»Î·Ï„ÏÎ½ Î¼Îµ Rate Limiting
let socket;
let lastUpdateTime = 0;
let updateTimeout = null;
const MIN_UPDATE_INTERVAL = 30000; // 30 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î± Î¼ÎµÏ„Î±Î¾Ï updates
const MAX_RANDOM_DELAY = 10000; // 0-10 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î± random delay

// Update header logo function
function updateHeaderLogo(logoDataUrl) {
    const headerLogo = document.getElementById('header-logo');
    if (!headerLogo) {
        console.warn('Header logo element not found');
        return;
    }
    
    if (!logoDataUrl || logoDataUrl.trim() === '') {
        // Clear logo
        headerLogo.style.backgroundImage = '';
        headerLogo.style.display = 'none';
        console.log('ğŸ–¼ï¸ Header logo cleared');
    } else {
        // Set logo
        headerLogo.style.backgroundImage = `url('${logoDataUrl}')`;
        headerLogo.style.display = 'inline-block';
        console.log('ğŸ–¼ï¸ Header logo updated');
    }
}

// Update conference title function
function updateConferenceTitle(title) {
    const titleElement = document.getElementById('conference-title');
    
    if (!titleElement) {
        console.warn('Conference title element not found');
        return;
    }
    
    if (!title || title.trim() === '' || title === 'TimeCastÂ® Pro Presentation Timer') {
        // Use fallback title
        titleElement.textContent = 'TimeCastâ„¢ Pro';
        console.log('ğŸ“ Conference title reset to default');
    } else {
        // Set conference title
        titleElement.textContent = title;
        console.log('ğŸ“ Conference title updated:', title);
    }
}

// Load initial settings from server
async function loadInitialSettings() {
    try {
        const response = await fetch('/api/timer/current');
        const data = await response.json();
        
        if (data) {
            // Update logo
            if (data.logoDataUrl) {
                updateHeaderLogo(data.logoDataUrl);
                console.log('ğŸ–¼ï¸ Initial logo loaded from server');
            } else {
                console.log('ğŸ–¼ï¸ No initial logo available');
            }
            
            // Update title
            if (data.title) {
                updateConferenceTitle(data.title);
                console.log('ğŸ“ Initial title loaded from server');
            } else {
                console.log('ğŸ“ No initial title available');
            }
        }
    } catch (error) {
        console.warn('âš ï¸ Could not load initial settings:', error.message);
    }
}

// Î£ÏÎ½Î´ÎµÏƒÎ· ÏƒÏ„Î¿ WebSocket
function connectWebSocket() {
    socket = io();
    
    socket.on('connect', () => {
        console.log('ğŸ”Œ Connected to WebSocket for speaker updates');
        
        // ÎšÎ‘Î¤Î‘Î§Î©Î¡Î—Î£Î— Î©Î£ QUESTIONS CLIENT
        // Î Î±Î¯ÏÎ½Î¿Ï…Î¼Îµ Ï„Î¿ saved PC name
        const savedPcName = localStorage.getItem('pcName');
        const hostname = savedPcName && savedPcName.trim() ? savedPcName.trim() : 'Questions-Form';
        
        console.log('ğŸ” Sending hostname to server:', hostname);
        socket.emit('registerClient', {
            type: 'questions-client',
            role: 'questions',
            hostname: hostname
        });
        
        console.log('ğŸ“ Registered as: questions-client');
    });

    // PING/PONG HANDLERS Î³Î¹Î± heartbeat
    socket.on('ping', () => {
        socket.emit('pong');
    });

    socket.on('pong', () => {
        // Server received our ping
    });
    
    // Rate-limited ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÏŒÏ„Î±Î½ Î±Î»Î»Î¬Î¶Î¿Ï…Î½ Ï„Î± markers
    socket.on('eventMarkersUpdate', (data) => {
        const now = Date.now();
        
        console.log(`ğŸ“Š Event markers update received - action: ${data.action}`);
        
        // Î†Î¼ÎµÏƒÎ· ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î³Î¹Î± edit actions (Ï‡Ï‰ÏÎ¯Ï‚ rate limiting)
        if (data.action === 'edit') {
            console.log('ğŸ“ Marker edited - immediate speaker reload');
            
            // Cancel Ï„Ï…Ï‡ÏŒÎ½ pending update
            if (updateTimeout) {
                clearTimeout(updateTimeout);
            }
            
            loadSpeakers(); // Î†Î¼ÎµÏƒÎ· Î±Î½Î±Î½Î­Ï‰ÏƒÎ· Î³Î¹Î± edits
            lastUpdateTime = Date.now();
            return;
        }
        
        // Rate limiting Î³Î¹Î± add/delete: Î¼ÏŒÎ½Î¿ Î±Î½ Î­Ï‡Î¿Ï…Î½ Ï€ÎµÏÎ¬ÏƒÎµÎ¹ 30+ Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
        if (now - lastUpdateTime < MIN_UPDATE_INTERVAL) {
            console.log('ğŸ“Š Event markers update ignored (rate limited)');
            return;
        }
        
        // Cancel Ï„Ï…Ï‡ÏŒÎ½ pending update
        if (updateTimeout) {
            clearTimeout(updateTimeout);
        }
        
        // Staggered update: random delay 0-10 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î± Î³Î¹Î± add/delete
        const randomDelay = Math.random() * MAX_RANDOM_DELAY;
        
        console.log(`ğŸ“Š Event markers updated - scheduling speaker reload in ${Math.round(randomDelay/1000)}s`);
        
        updateTimeout = setTimeout(() => {
            lastUpdateTime = Date.now();
            loadSpeakers(); // Î‘Î½Î±Î½Î­Ï‰ÏƒÎ· Î»Î¯ÏƒÏ„Î±Ï‚ Î¿Î¼Î¹Î»Î·Ï„ÏÎ½
            updateTimeout = null;
        }, randomDelay);
    });

    // Listen for settings updates (official "Apply" button clicks only)
    socket.on('settingsUpdate', (data) => {
        console.log('âš™ï¸ Settings update received:', data);
        
        // Update logo only on official settings apply (like timer.html)
        if (data.display && data.display.logoDataUrl !== undefined) {
            updateHeaderLogo(data.display.logoDataUrl);
        }
        
        // Update title only on official settings apply
        if (data.display && data.display.title !== undefined) {
            updateConferenceTitle(data.display.title);
        }
    });

    // Listen for full state updates
    socket.on('fullStateUpdate', (data) => {
        console.log('ğŸ”„ Full state update received');
        
        // Update logo from full state
        if (data.displaySettings && data.displaySettings.logoDataUrl !== undefined) {
            updateHeaderLogo(data.displaySettings.logoDataUrl);
        }
        
        // DON'T update title from full state - only from settingsUpdate (Apply button)
        // This ensures consistent behavior with timer.html
        console.log('ğŸ“ Title update skipped - waiting for Apply button (settingsUpdate event)');
    });
    
    socket.on('disconnect', () => {
        console.log('ğŸ”Œ Disconnected from WebSocket');
        // Clear pending updates on disconnect
        if (updateTimeout) {
            clearTimeout(updateTimeout);
            updateTimeout = null;
        }
    });
}

// NoSleep Î³Î¹Î± Î½Î± Î¼Î·Î½ ÏƒÎ²Î®Î½ÎµÎ¹ Î· Î¿Î¸ÏŒÎ½Î·
const noSleep = new NoSleep();
let noSleepEnabled = false;

// Î•Î½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· NoSleep Î¼Îµ Î¿Ï€Î¿Î¹Î¿Î´Î®Ï€Î¿Ï„Îµ user interaction
function enableNoSleep() {
    if (!noSleepEnabled) {
        try {
            noSleep.enable();
            noSleepEnabled = true;
            console.log('NoSleep ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î®Î¸Î·ÎºÎµ');
            
            // Î‘Ï†Î±Î¯ÏÎµÏƒÎ· ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ listeners
            document.removeEventListener('click', enableNoSleep, false);
            document.removeEventListener('touchstart', enableNoSleep, false);
            document.removeEventListener('keydown', enableNoSleep, false);
            
            // Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Î¼Î·Î½ÏÎ¼Î±Ï„Î¿Ï‚ ÏƒÏ„Î·Î½ Î¿Î¸ÏŒÎ½Î·
            showNoSleepStatus();
        } catch (error) {
            console.error('NoSleep failed:', error);
        }
    }
}

// Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· listeners Î³Î¹Î± Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ¬ events
document.addEventListener('click', enableNoSleep, false);
document.addEventListener('touchstart', enableNoSleep, false);
document.addEventListener('keydown', enableNoSleep, false);

// Î•Î¹Î´Î¹ÎºÎ® ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î³Î¹Î± iOS
if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
    console.log('iOS device detected - NoSleep will activate on first touch');
    
    // Î ÏÏŒÏƒÎ¸ÎµÏ„Î· Ï€ÏÎ¿ÏƒÏ„Î±ÏƒÎ¯Î± Î³Î¹Î± iOS
    document.addEventListener('touchend', enableNoSleep, false);
    document.addEventListener('gesturestart', enableNoSleep, false);
}

// Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚ NoSleep
function showNoSleepStatus() {
    const statusDiv = document.createElement('div');
    statusDiv.style.cssText = `
        position: fixed;
        top: 5px;
        right: 5px;
        background: rgba(39, 174, 96, 0.9);
        color: white;
        padding: 5px 10px;
        border-radius: 3px;
        font-size: 12px;
        z-index: 9999;
        pointer-events: none;
    `;
    statusDiv.textContent = 'ğŸ”‹ Screen Lock Disabled';
    document.body.appendChild(statusDiv);
    
    // Î‘Ï†Î±Î¯ÏÎµÏƒÎ· Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ 3 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
    setTimeout(() => {
        if (statusDiv.parentNode) {
            statusDiv.parentNode.removeChild(statusDiv);
        }
    }, 3000);
}

// Î•Ï€Î±Î½ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· NoSleep ÎºÎ¬Î¸Îµ 1 Î»ÎµÏ€Ï„ÏŒ
setInterval(() => {
    if (noSleepEnabled && noSleep) {
        try {
            noSleep.enable();
            console.log('NoSleep reactivated - 1 minute check');
        } catch (error) {
            console.error('NoSleep reactivation failed:', error);
        }
    }
}, 60000); // ÎšÎ¬Î¸Îµ 1 Î»ÎµÏ€Ï„ÏŒ

// Î•ÎºÎºÎ¯Î½Î·ÏƒÎ· WebSocket Î¼ÎµÏ„Î¬ Ï„Î¿ DOM ready
document.addEventListener('DOMContentLoaded', function() {
    // Î¥Ï€Î¬ÏÏ‡Ï‰Î½ ÎºÏÎ´Î¹ÎºÎ±Ï‚...
    setTimeout(() => {
        console.log('ğŸ” DOM ready, searching for elements...');
        
        const select = document.getElementById('targetSpeaker');
        if (select) {
            console.log('âœ… Speaker select found!');
            loadSpeakers();
            
            // ÎÎ•ÎŸÎ£: Î£ÏÎ½Î´ÎµÏƒÎ· WebSocket Î³Î¹Î± auto-updates
            connectWebSocket();
            
            // Load initial settings (logo + title)
            loadInitialSettings();
        } else {
            console.error('âŒ Speaker select still not found after DOM ready');
            setTimeout(() => {
                loadSpeakers();
                connectWebSocket(); // ÎšÎ±Î¹ ÎµÎ´Ï
                loadInitialSettings(); // ÎšÎ±Î¹ ÎµÎ´Ï
            }, 1000);
        }
    }, 100);
});

// Right-click context menu functionality
document.addEventListener('DOMContentLoaded', () => {
    // Right-click context menu events
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        const contextMenu = document.getElementById('contextMenu');
        contextMenu.style.display = 'block';
        contextMenu.style.left = e.pageX + 'px';
        contextMenu.style.top = e.pageY + 'px';
    });
    
    // Hide context menu on click elsewhere
    document.addEventListener('click', function(e) {
        const contextMenu = document.getElementById('contextMenu');
        if (!contextMenu.contains(e.target)) {
            contextMenu.style.display = 'none';
        }
    });
    
    // Set PC Name handler
    document.getElementById('setPcName').addEventListener('click', function() {
        const currentName = localStorage.getItem('pcName') || '';
        const dialog = document.getElementById('pcNameDialog');
        const input = document.getElementById('pcNameInput');
        
        input.value = currentName;
        dialog.style.display = 'flex';
        input.focus();
        input.select();
        
        document.getElementById('contextMenu').style.display = 'none';
    });
    
    // PC Name dialog handlers
    document.getElementById('pcNameOk').addEventListener('click', function() {
        const input = document.getElementById('pcNameInput');
        const newName = input.value.trim();
        
        if (newName) {
            localStorage.setItem('pcName', newName);
            console.log('âœ… PC Name saved:', newName);
            
            // Î•Ï€Î±Î½Î±ÏƒÏÎ½Î´ÎµÏƒÎ· Î¼Îµ Î½Î­Î¿ hostname
            if (typeof socket !== 'undefined' && socket && socket.connected) {
                socket.emit('updateHostname', { hostname: newName });
                console.log('ğŸ”„ Sent hostname update to server:', newName);
            }
        }
        
        document.getElementById('pcNameDialog').style.display = 'none';
    });
    
    document.getElementById('pcNameCancel').addEventListener('click', function() {
        document.getElementById('pcNameDialog').style.display = 'none';
    });
    
    // Enter key support
    document.getElementById('pcNameInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            document.getElementById('pcNameOk').click();
        } else if (e.key === 'Escape') {
            document.getElementById('pcNameCancel').click();
        }
    });
});

// Custom dialog function
function showCustomDialog(title, message, type = 'info') {
    // Remove any existing dialog
    const existingDialog = document.getElementById('customDialog');
    if (existingDialog) {
        existingDialog.remove();
    }
    
    // Create dialog
    const dialog = document.createElement('div');
    dialog.id = 'customDialog';
    dialog.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        animation: fadeIn 0.2s ease;
    `;
    
    // Icon based on type
    let icon = 'ğŸ’¬';
    let titleColor = '#3498db';
    if (type === 'warning') {
        icon = 'âš ï¸';
        titleColor = '#f39c12';
    } else if (type === 'error') {
        icon = 'âŒ';
        titleColor = '#e74c3c';
    }
    
    dialog.innerHTML = `
        <div style="
            background: #2c3e50;
            padding: 25px;
            border-radius: 8px;
            color: white;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            max-width: 400px;
            margin: 20px;
        ">
            <h3 style="margin: 0 0 15px 0; color: ${titleColor}; font-size: 18px;">${icon} ${title}</h3>
            <p style="margin: 0 0 20px 0; line-height: 1.4; color: #ecf0f1; font-size: 14px;">${message}</p>
            <button onclick="closeCustomDialog()" style="
                background: #27ae60;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 4px;
                cursor: pointer;
                font-size: 14px;
                transition: background 0.2s;
            " onmouseover="this.style.background='#229954'" onmouseout="this.style.background='#27ae60'">
                OK
            </button>
        </div>
    `;
    
    // Add CSS animation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    `;
    document.head.appendChild(style);
    
    document.body.appendChild(dialog);
    
    // Auto-close after 5 seconds
    setTimeout(() => {
        closeCustomDialog();
    }, 5000);
}

function closeCustomDialog() {
    const dialog = document.getElementById('customDialog');
    if (dialog) {
        dialog.style.animation = 'fadeOut 0.2s ease';
        setTimeout(() => {
            dialog.remove();
        }, 200);
    }
}

// Î“Î•ÎœÎ— API Integration Î³Î¹Î± Company Autocomplete
let searchTimeout;
let selectedCompanyIndex = -1;
let companiesCache = [];
let searchCache = new Map(); // Client-side cache Î³Î¹Î± 8 calls/min rate limit

// Search companies Î±Ï€ÏŒ Î“Î•ÎœÎ— API (Î•Î»Î»Î¬Î´Î±)
async function searchGemiCompanies(query) {
    try {
        console.log('ğŸ‡¬ğŸ‡· Î“Î•ÎœÎ— API call Î³Î¹Î±:', query);
        const response = await fetch(`/api/gemi/search-companies?name=${encodeURIComponent(query)}`);

        if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
        }

        const data = await response.json();
        
        if (!data.success) {
            throw new Error(data.error || 'API error');
        }
        
        // Add country flag and source to companies, prioritize distinctive title
        return (data.companies || []).map(company => ({
            ...company,
            // Use distinctive title (coTitlesEl) if available, fallback to company name (coNameEl)
            name: (company.coTitlesEl && company.coTitlesEl.length > 0) ? company.coTitlesEl[0] : company.coNameEl,
            originalName: company.coNameEl, // Keep original name for reference
            distinctiveTitle: company.coTitlesEl ? company.coTitlesEl[0] : null,
            country: 'Greece',
            source: 'Î“Î•ÎœÎ—',
            flag: 'ğŸ‡¬ğŸ‡·'
        }));
        
    } catch (error) {
        console.error('âŒ Î“Î•ÎœÎ— API Error:', error);
        return [];
    }
}

// Search companies Î±Ï€ÏŒ INSEE API (Î“Î±Î»Î»Î¯Î±)
async function searchInseeCompanies(query) {
    try {
        console.log('ğŸ‡«ğŸ‡· INSEE API call Î³Î¹Î±:', query);
        const response = await fetch(`/api/insee/search-companies?name=${encodeURIComponent(query)}`);

        if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
        }

        const data = await response.json();
        
        if (!data.success) {
            throw new Error(data.error || 'API error');
        }
        
        // Add country flag and source to companies  
        return (data.companies || []).map(company => ({
            ...company,
            country: 'France',
            source: 'INSEE',
            flag: 'ğŸ‡«ğŸ‡·'
        }));
        
    } catch (error) {
        console.error('âŒ INSEE API Error:', error);
        return [];
    }
}

// Search companies Î±Ï€ÏŒ Danish CVR API
async function searchDanishCompanies(query) {
    try {
        console.log('ğŸ‡©ğŸ‡° CVR API call Î³Î¹Î±:', query);
        const response = await fetch(`/api/cvr/search-companies?name=${encodeURIComponent(query)}`);

        if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
        }

        const data = await response.json();
        
        if (!data.success) {
            throw new Error(data.error || 'API error');
        }
        
        // Add country flag and source to companies  
        return (data.companies || []).map(company => ({
            ...company,
            country: 'Denmark',
            source: 'CVR',
            flag: 'ğŸ‡©ğŸ‡°'
        }));
        
    } catch (error) {
        console.error('âŒ CVR API Error:', error);
        return [];
    }
}

// Finnish YTJ API search
async function searchYtjCompanies(query) {
    try {
        console.log('ğŸ‡«ğŸ‡® YTJ API call Î³Î¹Î±:', query);
        const response = await fetch(`/api/ytj/search-companies?name=${encodeURIComponent(query)}`);

        if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
        }

        const data = await response.json();
        
        if (!data.success || !data.companies) {
            console.warn('ğŸ‡«ğŸ‡® YTJ API returned no results');
            return [];
        }
        
        console.log(`âœ… YTJ API ÎµÏ€Î­ÏƒÏ„ÏÎµÏˆÎµ ${data.companies.length} Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±`);
        
        return data.companies.map(company => ({
            name: company.name,
            address: company.address || '',
            businessId: company.businessId || '',
            country: 'Finland',
            source: 'YTJ',
            flag: 'ğŸ‡«ğŸ‡®'
        }));
        
    } catch (error) {
        console.error('âŒ YTJ API Error:', error);
        return [];
    }
}

// Dutch KVK API removed - test API only contains dummy data


// Main dual search function (Î“Î•ÎœÎ— + INSEE)
async function searchCompanies(query) {
    if (query.length < 3) {
        hideAutocomplete();
        return;
    }

    const dropdown = document.getElementById('autocomplete-dropdown');
    
    // ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ cache Ï€ÏÏÏ„Î± Î¼Îµ language-specific key
    const cacheKey = `${currentFormLanguage}-${query.toLowerCase()}`;
    if (searchCache.has(cacheKey)) {
        console.log(`ğŸ“¦ Cache hit Î³Î¹Î± ${currentFormLanguage}:`, query);
        companiesCache = searchCache.get(cacheKey);
        displayCompanySuggestions(companiesCache);
        dropdown.style.display = 'block';
        return;
    }
    
    // Show appropriate loading message Î²Î¬ÏƒÎµÎ¹ Î³Î»ÏÏƒÏƒÎ±Ï‚
    const loadingMessages = {
        'el': 'ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· ÏƒÏ„Î¿ ÎµÎ»Î»Î·Î½Î¹ÎºÏŒ Î“Î•ÎœÎ—...',
        'fr': 'ğŸ” Recherche dans INSEE France...',
        'da': 'ğŸ” SÃ¸gning i dansk CVR...',
        'fi': 'ğŸ” Haku suomalaisesta YTJ:stÃ¤...',
        'en': 'ğŸ” Company search not available',
        'de': 'ğŸ” Unternehmenssuche nicht verfÃ¼gbar',
        'es': 'ğŸ” BÃºsqueda de empresas no disponible',
        'it': 'ğŸ” Ricerca aziende non disponibile',
        'uk': 'ğŸ” ĞŸĞ¾ÑˆÑƒĞº ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ğ¹ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¸Ğ¹',
        'nl': 'ğŸ” Bedrijfszoeken niet beschikbaar',
        'pt': 'ğŸ” Pesquisa de empresas nÃ£o disponÃ­vel',
        'ro': 'ğŸ” CÄƒutarea companiilor nu este disponibilÄƒ',
        'hr': 'ğŸ” PretraÅ¾ivanje tvrtki nije dostupno',
        'pl': 'ğŸ” Wyszukiwanie firm niedostÄ™pne',
        'lv': 'ğŸ” UzÅ†Ä“mumu meklÄ“Å¡ana nav pieejama',
        'sl': 'ğŸ” Iskanje podjetij ni na voljo',
        'et': 'ğŸ” EttevÃµtete otsing pole saadaval',
        'sv': 'ğŸ” FÃ¶retagssÃ¶kning inte tillgÃ¤nglig',
        'cs': 'ğŸ” VyhledÃ¡vÃ¡nÃ­ spoleÄnostÃ­ nenÃ­ dostupnÃ©',
        'hu': 'ğŸ” CÃ©glekÃ©rdezÃ©s nem elÃ©rhetÅ‘',
        'lt': 'ğŸ” Ä®moniÅ³ paieÅ¡ka nepasiekiama',
        'sk': 'ğŸ” VyhÄ¾adÃ¡vanie spoloÄnostÃ­ nie je dostupnÃ©',
        'bg': 'ğŸ” Ğ¢ÑŠÑ€ÑĞµĞ½Ğµ Ğ½Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ½Ğµ Ğµ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ½Ğ¾',
        'mt': 'ğŸ” Tfittxija tal-kumpaniji mhix disponibbli'
    };
    dropdown.innerHTML = `<div class="loading-indicator">${loadingMessages[currentFormLanguage] || loadingMessages['el']}</div>`;
    dropdown.style.display = 'block';

    try {
        let companies = [];
        
        // Language-specific API calls
        if (currentFormLanguage === 'el') {
            console.log('ğŸ‡¬ğŸ‡· Î“Î•ÎœÎ— search Î³Î¹Î±:', query);
            companies = await searchGemiCompanies(query);
            console.log(`âœ… Greek companies found: ${companies.length}`);
        } else if (currentFormLanguage === 'fr') {
            console.log('ğŸ‡«ğŸ‡· INSEE search Î³Î¹Î±:', query);
            companies = await searchInseeCompanies(query);
            console.log(`âœ… French companies found: ${companies.length}`);
        } else if (currentFormLanguage === 'en') {
            // English fallback - no company search
            console.log('ğŸ‡ºğŸ‡¸ English: No company search available');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">Company search not available in English</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'de') {
            // German fallback - no company search
            console.log('ğŸ‡©ğŸ‡ª Deutsch: Keine Unternehmenssuche verfÃ¼gbar');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">Unternehmenssuche nicht verfÃ¼gbar auf Deutsch</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'es') {
            // Spanish fallback - no company search
            console.log('ğŸ‡ªğŸ‡¸ EspaÃ±ol: BÃºsqueda de empresas no disponible');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">BÃºsqueda de empresas no disponible en espaÃ±ol</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'it') {
            // Italian fallback - no company search
            console.log('ğŸ‡®ğŸ‡¹ Italiano: Ricerca aziende non disponibile');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">Ricerca aziende non disponibile in italiano</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'da') {
            // Danish - CVR API search
            console.log('ğŸ‡©ğŸ‡° Danish: CVR API search for:', query);
            companies = await searchDanishCompanies(query);
        } else if (currentFormLanguage === 'uk') {
            // Ukrainian fallback - no company search API available yet
            console.log('ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°: ĞŸĞ¾ÑˆÑƒĞº ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ğ¹ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¸Ğ¹');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">ĞŸĞ¾ÑˆÑƒĞº ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ğ¹ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¸Ğ¹ ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ¾Ñ Ğ¼Ğ¾Ğ²Ğ¾Ñ</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'nl') {
            // Dutch fallback - test API only contains dummy data, not real companies
            console.log('ğŸ‡³ğŸ‡± Nederlands: Bedrijfszoeken niet beschikbaar');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">Bedrijfszoeken niet beschikbaar in het Nederlands</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'pt') {
            // Portuguese fallback - no free API available
            console.log('ğŸ‡µğŸ‡¹ PortuguÃªs: Pesquisa de empresas nÃ£o disponÃ­vel');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">Pesquisa de empresas nÃ£o disponÃ­vel em portuguÃªs</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'es') {
            // Spanish fallback - no company search
            console.log('ğŸ‡ªğŸ‡¸ EspaÃ±ol: BÃºsqueda de empresas no disponible');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">BÃºsqueda de empresas no disponible en espaÃ±ol</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'it') {
            // Italian fallback - no company search
            console.log('ğŸ‡®ğŸ‡¹ Italiano: Ricerca aziende non disponibile');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">Ricerca aziende non disponibile in italiano</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'ro') {
            // Romanian fallback - no free API available
            console.log('ğŸ‡·ğŸ‡´ RomÃ¢nÄƒ: CÄƒutare companii nu este disponibilÄƒ');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">CÄƒutarea companiilor nu este disponibilÄƒ Ã®n romÃ¢nÄƒ</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'hr') {
            // Croatian fallback - no free API available
            console.log('ğŸ‡­ğŸ‡· Hrvatski: PretraÅ¾ivanje tvrtki nije dostupno');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">PretraÅ¾ivanje tvrtki nije dostupno na hrvatskom</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'pl') {
            // Polish fallback - no free API available
            console.log('ğŸ‡µğŸ‡± Polski: Wyszukiwanie firm nie jest dostÄ™pne');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">Wyszukiwanie firm nie jest dostÄ™pne po polsku</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'lv') {
            // Latvian fallback - no free API available
            console.log('ğŸ‡±ğŸ‡» LatvieÅ¡u: UzÅ†Ä“mumu meklÄ“Å¡ana nav pieejama');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">UzÅ†Ä“mumu meklÄ“Å¡ana nav pieejama latvieÅ¡u valodÄ</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'sl') {
            // Slovenian fallback - no free API available
            console.log('ğŸ‡¸ğŸ‡® SlovenÅ¡Äina: Iskanje podjetij ni na voljo');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">Iskanje podjetij ni na voljo v slovenÅ¡Äini</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'et') {
            // Estonian fallback - no free API available
            console.log('ğŸ‡ªğŸ‡ª Eesti: EttevÃµtete otsing pole saadaval');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">EttevÃµtete otsing pole eesti keeles saadaval</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'fi') {
            console.log('ğŸ‡«ğŸ‡® YTJ search Î³Î¹Î±:', query);
            companies = await searchYtjCompanies(query);
            console.log(`âœ… Finnish companies found: ${companies.length}`);
        } else if (currentFormLanguage === 'sv') {
            // Swedish fallback - no free API available
            console.log('ğŸ‡¸ğŸ‡ª Svenska: FÃ¶retagssÃ¶kning inte tillgÃ¤nglig');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">FÃ¶retagssÃ¶kning inte tillgÃ¤nglig pÃ¥ svenska</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'cs') {
            // Czech fallback - no free API available
            console.log('ğŸ‡¨ğŸ‡¿ ÄŒeÅ¡tina: VyhledÃ¡vÃ¡nÃ­ spoleÄnostÃ­ nenÃ­ dostupnÃ©');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">VyhledÃ¡vÃ¡nÃ­ spoleÄnostÃ­ nenÃ­ dostupnÃ© v ÄeÅ¡tinÄ›</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'hu') {
            // Hungarian fallback - no free API available
            console.log('ğŸ‡­ğŸ‡º Magyar: CÃ©glekÃ©rdezÃ©s nem elÃ©rhetÅ‘');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">CÃ©glekÃ©rdezÃ©s nem elÃ©rhetÅ‘ magyar nyelven</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'lt') {
            // Lithuanian fallback - no free API available
            console.log('ğŸ‡±ğŸ‡¹ LietuviÅ³: Ä®moniÅ³ paieÅ¡ka nepasiekiama');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">Ä®moniÅ³ paieÅ¡ka nepasiekiama lietuviÅ³ kalba</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'sk') {
            // Slovak fallback - no free API available
            console.log('ğŸ‡¸ğŸ‡° SlovenÄina: VyhÄ¾adÃ¡vanie spoloÄnostÃ­ nie je dostupnÃ©');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">VyhÄ¾adÃ¡vanie spoloÄnostÃ­ nie je dostupnÃ© v slovenÄine</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'bg') {
            // Bulgarian fallback - no free API available
            console.log('ğŸ‡§ğŸ‡¬ Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸: Ğ¢ÑŠÑ€ÑĞµĞ½Ğµ Ğ½Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ½Ğµ Ğµ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ½Ğ¾');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">Ğ¢ÑŠÑ€ÑĞµĞ½Ğµ Ğ½Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ½Ğµ Ğµ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ½Ğ¾ Ğ½Ğ° Ğ±ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        } else if (currentFormLanguage === 'mt') {
            // Maltese fallback - no free API available
            console.log('ğŸ‡²ğŸ‡¹ Malti: Tfittxija tal-kumpaniji mhix disponibbli');
            companies = [];
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">Tfittxija tal-kumpaniji mhix disponibbli bil-Malti</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        }
        
        if (companies.length === 0) {
            dropdown.innerHTML = '<div style="padding: 10px; text-align: center; color: #666;">Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ ÎµÏ„Î±Î¹ÏÎµÎ¯ÎµÏ‚ / No companies found</div>';
            setTimeout(() => hideAutocomplete(), 2000);
            return;
        }
        
        companiesCache = companies;
        
        // Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· ÏƒÏ„Î¿ cache Î¼Îµ 5-minute TTL
        searchCache.set(cacheKey, companiesCache);
        setTimeout(() => searchCache.delete(cacheKey), 5 * 60 * 1000);
        
        displayCompanySuggestions(companiesCache);
        
    } catch (error) {
        console.error('âŒ Company Search Error:', error);
        dropdown.innerHTML = '<div class="no-results">âŒ Î£Ï†Î¬Î»Î¼Î± Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·Ï‚ - Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÏ„Îµ Î¾Î±Î½Î¬</div>';
    }
}

function displayCompanySuggestions(companies) {
    const dropdown = document.getElementById('autocomplete-dropdown');
    selectedCompanyIndex = -1;
    
    if (!companies || companies.length === 0) {
        dropdown.innerHTML = '<div class="no-results">âŒ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎ±Î½ ÎµÏ„Î±Î¹ÏÎµÎ¯ÎµÏ‚</div>';
        return;
    }

    const html = companies.map((company, index) => {
        // Handle both Î“Î•ÎœÎ— and INSEE formats
        const name = company.coNameEl || company.name || 'Î†Î³Î½Ï‰ÏƒÏ„Î¿ ÏŒÎ½Î¿Î¼Î±';
        const city = company.city || '';
        const flag = company.flag || 'ğŸ¢';
        const source = company.source || '';
        
        let details = [];
        
        if (company.source === 'Î“Î•ÎœÎ—') {
            // Greek company format
            const legalType = company.legalType?.descr || '';
            const afm = company.afm || '';
            
            if (legalType) details.push(legalType);
            if (city) details.push(city);  
            if (afm) details.push(`Î‘Î¦Îœ: ${afm}`);
        } else if (company.source === 'INSEE') {
            // French company format
            const postalCode = company.postalCode || '';
            const siret = company.siret || '';
            
            if (city && postalCode) details.push(`${city} ${postalCode}`);
            else if (city) details.push(city);
            if (siret) details.push(`SIRET: ${siret}`);
        }
        
        return `
            <div class="autocomplete-item" data-index="${index}">
                <div class="company-name">${flag} ${name} <span class="company-source">(${source})</span></div>
                ${details.length > 0 ? `<div class="company-details">${details.join(' â€¢ ')}</div>` : ''}
            </div>
        `;
    }).join('');

    dropdown.innerHTML = html;
    
    // Add click event listeners
    dropdown.querySelectorAll('.autocomplete-item').forEach(item => {
        item.addEventListener('click', () => {
            const index = parseInt(item.getAttribute('data-index'));
            selectCompany(companies[index]);
        });
    });
}

function selectCompany(company) {
    const input = document.getElementById('company');
    
    // Handle both Î“Î•ÎœÎ— and INSEE formats
    const companyName = company.coNameEl || company.name || 'Î†Î³Î½Ï‰ÏƒÏ„Î¿ ÏŒÎ½Î¿Î¼Î±';
    input.value = companyName;
    
    hideAutocomplete();
}

function hideAutocomplete() {
    const dropdown = document.getElementById('autocomplete-dropdown');
    dropdown.style.display = 'none';
    selectedCompanyIndex = -1;
}

function highlightCompany(index) {
    const items = document.querySelectorAll('.autocomplete-item');
    
    // Remove previous highlight
    items.forEach(item => item.classList.remove('highlighted'));
    
    // Add new highlight
    if (index >= 0 && index < items.length) {
        selectedCompanyIndex = index;
        items[index].classList.add('highlighted');
        items[index].scrollIntoView({ block: 'nearest' });
    }
}

// Setup autocomplete event listeners
document.addEventListener('DOMContentLoaded', function() {
    const companyInput = document.getElementById('company');
    
    if (companyInput) {
        // Input event for search
        companyInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                searchCompanies(e.target.value.trim());
            }, 800); // 800ms debounce Î³Î¹Î± rate limiting
        });

        // Keyboard navigation
        companyInput.addEventListener('keydown', (e) => {
            const dropdown = document.getElementById('autocomplete-dropdown');
            const items = dropdown.querySelectorAll('.autocomplete-item');
            
            if (dropdown.style.display === 'none' || items.length === 0) return;
            
            switch (e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    highlightCompany(selectedCompanyIndex + 1);
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    highlightCompany(selectedCompanyIndex - 1);
                    break;
                case 'Enter':
                    e.preventDefault();
                    if (selectedCompanyIndex >= 0 && companiesCache[selectedCompanyIndex]) {
                        selectCompany(companiesCache[selectedCompanyIndex]);
                    }
                    break;
                case 'Escape':
                    hideAutocomplete();
                    break;
            }
        });

        // Hide on focus loss
        companyInput.addEventListener('blur', () => {
            // Delay hiding to allow click events
            setTimeout(hideAutocomplete, 150);
        });

        // Show dropdown on focus if has content
        companyInput.addEventListener('focus', () => {
            if (companyInput.value.trim().length >= 3) {
                searchCompanies(companyInput.value.trim());
            }
        });
    }

    // Hide dropdown when clicking outside
    document.addEventListener('click', (e) => {
        const container = e.target.closest('.autocomplete-container');
        if (!container) {
            hideAutocomplete();
        }
    });
});

    </script>

<!-- i18next Internationalization -->
<script src="https://cdn.jsdelivr.net/npm/i18next@23.12.2/i18next.min.js"></script>

<script>
// Language management for Questions Form
let currentFormLanguage = 'el'; // Default to Greek

// Load language preference from localStorage
function loadFormLanguage() {
    const saved = localStorage.getItem('qform-language');
    if (saved && ['el', 'en', 'fr', 'de', 'es', 'it'].includes(saved)) {
        currentFormLanguage = saved;
    }
}

// Save language preference to localStorage
function saveFormLanguage(lang) {
    localStorage.setItem('qform-language', lang);
}

// Translation resources
const formTranslations = {
    el: {
        title: "Î•ÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚ Ï€ÏÎ¿Ï‚ ÎŸÎ¼Î¹Î»Î·Ï„Î­Ï‚",
        subtitle: "Î¥Ï€Î¿Î²Î¬Î»ÎµÏ„Îµ Ï„Î·Î½ ÎµÏÏÏ„Î·ÏƒÎ® ÏƒÎ±Ï‚",
        successMessage: "âœ… Î— ÎµÏÏÏ„Î·ÏƒÎ® ÏƒÎ±Ï‚ Ï…Ï€Î¿Î²Î»Î®Î¸Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚! Î˜Î± ÎµÎ¾ÎµÏ„Î±ÏƒÏ„ÎµÎ¯ Î±Ï€ÏŒ Ï„Î· Î´Î¹Î¿ÏÎ³Î¬Î½Ï‰ÏƒÎ·.",
        labels: {
            name: "ÎŒÎ½Î¿Î¼Î± *",
            company: "Î•Ï„Î±Î¹ÏÎµÎ¯Î± *", 
            department: "Î¤Î¼Î®Î¼Î±",
            email: "E-Mail",
            targetSpeaker: "Î•ÏÏÏ„Î·ÏƒÎ· Ï€ÏÎ¿Ï‚ *",
            subject: "Î˜Î­Î¼Î± *",
            question: "ÎšÎµÎ¯Î¼ÎµÎ½Î¿ Î•ÏÏÏ„Î·ÏƒÎ·Ï‚ *"
        },
        placeholders: {
            company: "Î Î»Î·ÎºÏ„ÏÎ¿Î»Î¿Î³Î®ÏƒÏ„Îµ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± Ï„Î·Ï‚ ÎµÏ„Î±Î¹ÏÎµÎ¯Î±Ï‚...",
            department: "Ï€.Ï‡. Î›Î¿Î³Î¹ÏƒÏ„Î®ÏÎ¹Î¿, Î Ï‰Î»Î®ÏƒÎµÎ¹Ï‚",
            email: "Î‘Î½ Ï„Î¿ ÎµÏÏÏ„Î·Î¼Î± ÏƒÎ±Ï‚ Î´ÎµÎ½ Î±Ï€Î±Î½Ï„Î·Î¸ÎµÎ¯ Ï€ÏÎ¿Ï†Î¿ÏÎ¹ÎºÎ¬",
            subject: "Ï€.Ï‡. Î”Î±Ï€Î¬Î½ÎµÏ‚ Î‘Î½Î±Î»Ï‰ÏƒÎ¯Î¼Ï‰Î½",
            questionText: "Ï€.Ï‡. Î ÏÏ‚ ÎºÎ¬Î½Î¿Ï…Î¼Îµ Î±Î½Ï„Î¹Î»Î¿Î³Î¹ÏƒÎ¼Î¿ÏÏ‚ Î³Î¹Î± Ï„Î± Î±Î½Î±Î»ÏÏƒÎ¹Î¼Î± Ï€Î¿Ï… Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ ÏƒÏ„Î·Î½ Ï€Î±ÏÎ±Î³Ï‰Î³Î®;"
        },
        options: {
            loadingSpeakers: "â³ Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î¿Î¼Î¹Î»Î·Ï„ÏÎ½...",
            generalQuestion: "Î“ÎµÎ½Î¹ÎºÎ® Î•ÏÏÏ„Î·ÏƒÎ· (ÎŒÎ»Î¿Î¹)",
            selectSpeaker: "Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¿Î¼Î¹Î»Î·Ï„Î®..."
        },
        charCounter: "Ï‡Î±ÏÎ±ÎºÏ„Î®ÏÎµÏ‚",
        submitButton: "ğŸ“¤ Î¥Ï€Î¿Î²Î¿Î»Î® Î•ÏÏÏ„Î·ÏƒÎ·Ï‚"
    },
    en: {
        title: "Questions to Speakers",
        subtitle: "Submit your question",
        successMessage: "âœ… Your question has been submitted successfully! It will be reviewed by the organizers.",
        labels: {
            name: "Name *",
            company: "Company *",
            department: "Department", 
            email: "E-Mail",
            targetSpeaker: "Question to *",
            subject: "Subject *",
            question: "Question Text *"
        },
        placeholders: {
            company: "Type the company name...",
            department: "e.g. Accounting, Sales",
            email: "If your question is not answered verbally",
            subject: "e.g. Consumables Expenses",
            questionText: "e.g. How do we account for consumables used in production?"
        },
        options: {
            loadingSpeakers: "â³ Loading speakers...",
            generalQuestion: "General Question (All)",
            selectSpeaker: "Select speaker..."
        },
        charCounter: "characters", 
        submitButton: "ğŸ“¤ Submit Question"
    },
    fr: {
        title: "Questions aux Intervenants",
        subtitle: "Soumettez votre question",
        successMessage: "âœ… Votre question a Ã©tÃ© soumise avec succÃ¨s ! Elle sera examinÃ©e par les organisateurs.",
        labels: {
            name: "Nom *",
            company: "Entreprise *",
            department: "DÃ©partement", 
            email: "E-Mail",
            targetSpeaker: "Question Ã  *",
            subject: "Sujet *",
            question: "Texte de la Question *"
        },
        placeholders: {
            company: "Tapez le nom de l'entreprise...",
            department: "ex. ComptabilitÃ©, Ventes",
            email: "Si votre question n'est pas rÃ©pondue oralement",
            subject: "ex. DÃ©penses de Consommables",
            questionText: "ex. Comment comptabilisons-nous les consommables utilisÃ©s en production ?"
        },
        options: {
            loadingSpeakers: "â³ Chargement des intervenants...",
            generalQuestion: "Question GÃ©nÃ©rale (Tous)",
            selectSpeaker: "SÃ©lectionner un intervenant..."
        },
        charCounter: "caractÃ¨res", 
        submitButton: "ğŸ“¤ Soumettre la Question"
    },
    de: {
        title: "Fragen an Referenten",
        subtitle: "Stellen Sie Ihre Frage",
        successMessage: "âœ… Ihre Frage wurde erfolgreich eingereicht! Sie wird von den Organisatoren geprÃ¼ft.",
        labels: {
            name: "Name *",
            company: "Unternehmen *",
            department: "Abteilung", 
            email: "E-Mail",
            targetSpeaker: "Frage an *",
            subject: "Betreff *",
            question: "Fragetext *"
        },
        placeholders: {
            company: "Geben Sie den Firmennamen ein...",
            department: "z.B. Buchhaltung, Vertrieb",
            email: "Falls Ihre Frage nicht mÃ¼ndlich beantwortet wird",
            subject: "z.B. Verbrauchsmaterialkosten",
            questionText: "z.B. Wie verbuchen wir Verbrauchsmaterialien, die in der Produktion verwendet werden?"
        },
        options: {
            loadingSpeakers: "â³ Referenten werden geladen...",
            generalQuestion: "Allgemeine Frage (Alle)",
            selectSpeaker: "Referenten auswÃ¤hlen..."
        },
        charCounter: "Zeichen", 
        submitButton: "ğŸ“¤ Frage Einreichen"
    },
    es: {
        title: "Preguntas a los Ponentes",
        subtitle: "EnvÃ­a tu pregunta",
        successMessage: "âœ… Â¡Tu pregunta ha sido enviada exitosamente! SerÃ¡ revisada por los organizadores.",
        labels: {
            name: "Nombre *",
            company: "Empresa *",
            department: "Departamento", 
            email: "E-Mail",
            targetSpeaker: "Pregunta para *",
            subject: "Asunto *",
            question: "Texto de la Pregunta *"
        },
        placeholders: {
            company: "Escriba el nombre de la empresa...",
            department: "ej. Contabilidad, Ventas",
            email: "Si tu pregunta no es respondida verbalmente",
            subject: "ej. Gastos de Suministros",
            questionText: "ej. Â¿CÃ³mo contabilizamos los suministros utilizados en la producciÃ³n?"
        },
        options: {
            loadingSpeakers: "â³ Cargando ponentes...",
            generalQuestion: "Pregunta General (Todos)",
            selectSpeaker: "Seleccionar ponente..."
        },
        charCounter: "caracteres", 
        submitButton: "ğŸ“¤ Enviar Pregunta"
    },
    it: {
        title: "Domande ai Relatori",
        subtitle: "Invia la tua domanda",
        successMessage: "âœ… La tua domanda Ã¨ stata inviata con successo! SarÃ  esaminata dagli organizzatori.",
        labels: {
            name: "Nome *",
            company: "Azienda *",
            department: "Dipartimento", 
            email: "E-Mail",
            targetSpeaker: "Domanda per *",
            subject: "Oggetto *",
            question: "Testo della Domanda *"
        },
        placeholders: {
            company: "Digita il nome dell'azienda...",
            department: "es. ContabilitÃ , Vendite",
            email: "Se la tua domanda non riceve risposta verbale",
            subject: "es. Spese per Materiali di Consumo",
            questionText: "es. Come contabilizziamo i materiali di consumo utilizzati nella produzione?"
        },
        options: {
            loadingSpeakers: "â³ Caricamento relatori...",
            generalQuestion: "Domanda Generale (Tutti)",
            selectSpeaker: "Seleziona relatore..."
        },
        charCounter: "caratteri", 
        submitButton: "ğŸ“¤ Invia Domanda"
    },
    da: {
        title: "SpÃ¸rgsmÃ¥l til Talere",
        subtitle: "Indsend dit spÃ¸rgsmÃ¥l",
        successMessage: "âœ… Dit spÃ¸rgsmÃ¥l er indsendt! Det vil blive gennemgÃ¥et af arrangÃ¸rerne.",
        labels: {
            name: "Navn *",
            company: "Virksomhed *",
            department: "Afdeling", 
            email: "E-Mail",
            targetSpeaker: "SpÃ¸rgsmÃ¥l til *",
            subject: "Emne *",
            question: "SpÃ¸rgsmÃ¥lstekst *"
        },
        placeholders: {
            company: "Indtast virksomhedens navn...",
            department: "f.eks. Regnskab, Salg",
            email: "Hvis dit spÃ¸rgsmÃ¥l ikke besvares mundtligt",
            subject: "f.eks. Forbrugsudgifter",
            questionText: "f.eks. Hvordan bogfÃ¸rer vi forbrugsvarer brugt i produktionen?"
        },
        options: {
            loadingSpeakers: "â³ IndlÃ¦ser talere...",
            generalQuestion: "Generelt SpÃ¸rgsmÃ¥l (Alle)",
            selectSpeaker: "VÃ¦lg taler..."
        },
        charCounter: "tegn", 
        submitButton: "ğŸ“¤ Indsend SpÃ¸rgsmÃ¥l"
    },
    uk: {
        title: "ĞŸĞ¸Ñ‚Ğ°Ğ½Ğ½Ñ Ğ´Ğ¾ Ğ”Ğ¾Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ñ‡Ñ–Ğ²",
        subtitle: "ĞŸĞ¾Ğ´Ğ°Ğ¹Ñ‚Ğµ ÑĞ²Ğ¾Ñ” Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ",
        successMessage: "âœ… Ğ’Ğ°ÑˆĞµ Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ Ğ¿Ğ¾Ğ´Ğ°Ğ½Ğ¾ ÑƒÑĞ¿Ñ–ÑˆĞ½Ğ¾! Ğ’Ğ¾Ğ½Ğ¾ Ğ±ÑƒĞ´Ğµ Ñ€Ğ¾Ğ·Ğ³Ğ»ÑĞ½ÑƒÑ‚Ğ¾ Ğ¾Ñ€Ğ³Ğ°Ğ½Ñ–Ğ·Ğ°Ñ‚Ğ¾Ñ€Ğ°Ğ¼Ğ¸.",
        labels: {
            name: "Ğ†Ğ¼'Ñ *",
            company: "ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ñ *",
            department: "Ğ’Ñ–Ğ´Ğ´Ñ–Ğ»", 
            email: "E-Mail",
            targetSpeaker: "ĞŸĞ¸Ñ‚Ğ°Ğ½Ğ½Ñ Ğ´Ğ¾ *",
            subject: "Ğ¢ĞµĞ¼Ğ° *",
            question: "Ğ¢ĞµĞºÑÑ‚ ĞŸĞ¸Ñ‚Ğ°Ğ½Ğ½Ñ *"
        },
        placeholders: {
            company: "Ğ’Ğ²ĞµĞ´Ñ–Ñ‚ÑŒ Ğ½Ğ°Ğ·Ğ²Ñƒ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ñ—...",
            department: "Ğ½Ğ°Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´ Ğ‘ÑƒÑ…Ğ³Ğ°Ğ»Ñ‚ĞµÑ€Ñ–Ñ, ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ñ–",
            email: "Ğ¯ĞºÑ‰Ğ¾ Ğ²Ğ°ÑˆĞµ Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ Ğ½Ğµ Ğ±ÑƒĞ´Ğµ Ğ´Ğ°Ğ½Ğ¾ ÑƒÑĞ½Ğ¾",
            subject: "Ğ½Ğ°Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´ Ğ’Ğ¸Ñ‚Ñ€Ğ°Ñ‚Ğ¸ Ğ½Ğ° ĞœĞ°Ñ‚ĞµÑ€Ñ–Ğ°Ğ»Ğ¸",
            questionText: "Ğ½Ğ°Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´ Ğ¯Ğº Ğ¼Ğ¸ Ğ¾Ğ±Ğ»Ñ–ĞºĞ¾Ğ²ÑƒÑ”Ğ¼Ğ¾ Ğ¼Ğ°Ñ‚ĞµÑ€Ñ–Ğ°Ğ»Ğ¸, Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ñ– Ñƒ Ğ²Ğ¸Ñ€Ğ¾Ğ±Ğ½Ğ¸Ñ†Ñ‚Ğ²Ñ–?"
        },
        options: {
            loadingSpeakers: "â³ Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ´Ğ¾Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ñ‡Ñ–Ğ²...",
            generalQuestion: "Ğ—Ğ°Ğ³Ğ°Ğ»ÑŒĞ½Ğµ ĞŸĞ¸Ñ‚Ğ°Ğ½Ğ½Ñ (Ğ’ÑÑ–)",
            selectSpeaker: "ĞĞ±ĞµÑ€Ñ–Ñ‚ÑŒ Ğ´Ğ¾Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ñ‡Ğ°..."
        },
        charCounter: "ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ–Ğ²", 
        submitButton: "ğŸ“¤ ĞŸĞ¾Ğ´Ğ°Ñ‚Ğ¸ ĞŸĞ¸Ñ‚Ğ°Ğ½Ğ½Ñ"
    },
    nl: {
        title: "Vragen aan Sprekers",
        subtitle: "Stel uw vraag",
        successMessage: "âœ… Uw vraag is succesvol ingediend! Het zal beoordeeld worden door de organisatoren.",
        labels: {
            name: "Naam *",
            company: "Bedrijf *",
            department: "Afdeling", 
            email: "E-Mail",
            targetSpeaker: "Vraag aan *",
            subject: "Onderwerp *",
            question: "Vraag Tekst *"
        },
        placeholders: {
            company: "Voer de bedrijfsnaam in...",
            department: "bijv. Boekhouding, Verkoop",
            email: "Als uw vraag niet mondeling wordt beantwoord",
            subject: "bijv. Verbruikskosten",
            questionText: "bijv. Hoe boeken we verbruiksgoederen die in productie worden gebruikt?"
        },
        options: {
            loadingSpeakers: "â³ Sprekers laden...",
            generalQuestion: "Algemene Vraag (Alle)",
            selectSpeaker: "Selecteer spreker..."
        },
        charCounter: "tekens", 
        submitButton: "ğŸ“¤ Vraag Indienen"
    },
    pt: {
        title: "Perguntas aos Oradores",
        subtitle: "Envie sua pergunta",
        successMessage: "âœ… Sua pergunta foi enviada com sucesso! SerÃ¡ analisada pelos organizadores.",
        labels: {
            name: "Nome *",
            company: "Empresa *",
            department: "Departamento", 
            email: "E-Mail",
            targetSpeaker: "Pergunta para *",
            subject: "Assunto *",
            question: "Texto da Pergunta *"
        },
        placeholders: {
            company: "Digite o nome da empresa...",
            department: "ex. Contabilidade, Vendas",
            email: "Se sua pergunta nÃ£o for respondida verbalmente",
            subject: "ex. Despesas de ConsumÃ­veis",
            questionText: "ex. Como contabilizamos consumÃ­veis usados na produÃ§Ã£o?"
        },
        options: {
            loadingSpeakers: "â³ Carregando oradores...",
            generalQuestion: "Pergunta Geral (Todos)",
            selectSpeaker: "Selecionar orador..."
        },
        charCounter: "caracteres", 
        submitButton: "ğŸ“¤ Enviar Pergunta"
    },
    ro: {
        title: "ÃntrebÄƒri pentru Vorbitori",
        subtitle: "TrimiteÈ›i Ã®ntrebarea dumneavoastrÄƒ",
        successMessage: "âœ… Ãntrebarea dumneavoastrÄƒ a fost trimisÄƒ cu succes! Va fi examinatÄƒ de organizatori.",
        labels: {
            name: "Nume *",
            company: "Companie *",
            department: "Departament", 
            email: "E-Mail",
            targetSpeaker: "Ãntrebare pentru *",
            subject: "Subiect *",
            question: "Textul ÃntrebÄƒrii *"
        },
        placeholders: {
            company: "IntroduceÈ›i numele companiei...",
            department: "ex. Contabilitate, VÃ¢nzÄƒri",
            email: "DacÄƒ Ã®ntrebarea nu este rÄƒspunsÄƒ verbal",
            subject: "ex. Cheltuieli cu Consumabile",
            questionText: "ex. Cum contabilizÄƒm consumabilele folosite Ã®n producÈ›ie?"
        },
        options: {
            loadingSpeakers: "â³ Se Ã®ncarcÄƒ voritorii...",
            generalQuestion: "Ãntrebare GeneralÄƒ (ToÈ›i)",
            selectSpeaker: "SelectaÈ›i vorbitor..."
        },
        charCounter: "caractere", 
        submitButton: "ğŸ“¤ Trimite Ãntrebarea"
    },
    hr: {
        title: "Pitanja za Govornike",
        subtitle: "PoÅ¡aljite svoje pitanje",
        successMessage: "âœ… VaÅ¡e pitanje je uspjeÅ¡no poslano! Bit Ä‡e pregledano od strane organizatora.",
        labels: {
            name: "Ime *",
            company: "Tvrtka *",
            department: "Odjel", 
            email: "E-Mail",
            targetSpeaker: "Pitanje za *",
            subject: "Predmet *",
            question: "Tekst Pitanja *"
        },
        placeholders: {
            company: "Unesite naziv tvrtke...",
            department: "npr. RaÄunovodstvo, Prodaja",
            email: "Ako vaÅ¡e pitanje nije odgovoreno usmeno",
            subject: "npr. TroÅ¡kovi PotroÅ¡nog Materijala",
            questionText: "npr. Kako knjiÅ¾imo potroÅ¡ni materijal koriÅ¡ten u proizvodnji?"
        },
        options: {
            loadingSpeakers: "â³ UÄitavaju se govornici...",
            generalQuestion: "OpÄ‡e Pitanje (Svi)",
            selectSpeaker: "Odaberite govornika..."
        },
        charCounter: "znakova", 
        submitButton: "ğŸ“¤ PoÅ¡alji Pitanje"
    },
    pl: {
        title: "Pytania do PrelegentÃ³w",
        subtitle: "WyÅ›lij swoje pytanie",
        successMessage: "âœ… Twoje pytanie zostaÅ‚o pomyÅ›lnie wysÅ‚ane! Zostanie przeanalizowane przez organizatorÃ³w.",
        labels: {
            name: "ImiÄ™ *",
            company: "Firma *",
            department: "DziaÅ‚", 
            email: "E-Mail",
            targetSpeaker: "Pytanie do *",
            subject: "Temat *",
            question: "TreÅ›Ä‡ Pytania *"
        },
        placeholders: {
            company: "WprowadÅº nazwÄ™ firmy...",
            department: "np. KsiÄ™gowoÅ›Ä‡, SprzedaÅ¼",
            email: "JeÅ›li pytanie nie bÄ™dzie odpowiedziane ustnie",
            subject: "np. Wydatki na MateriaÅ‚y Eksploatacyjne",
            questionText: "np. Jak ksiÄ™gujemy materiaÅ‚y eksploatacyjne uÅ¼ywane w produkcji?"
        },
        options: {
            loadingSpeakers: "â³ Åadowanie prelegentÃ³w...",
            generalQuestion: "Pytanie OgÃ³lne (Wszyscy)",
            selectSpeaker: "Wybierz prelegenta..."
        },
        charCounter: "znakÃ³w", 
        submitButton: "ğŸ“¤ WyÅ›lij Pytanie"
    },
    lv: {
        title: "JautÄjumi lektoriem",
        subtitle: "NosÅ«tÄ«t savu jautÄjumu",
        successMessage: "âœ… JÅ«su jautÄjums ir veiksmÄ«gi nosÅ«tÄ«ts! To izskatÄ«s organizatori.",
        labels: {
            name: "VÄrds *",
            company: "UzÅ†Ä“mums *",
            department: "NodaÄ¼a", 
            email: "E-pasts",
            targetSpeaker: "JautÄjums priekÅ¡ *",
            subject: "TÄ“ma *",
            question: "JautÄjuma teksts *"
        },
        placeholders: {
            company: "Ievadiet uzÅ†Ä“muma nosaukumu...",
            department: "piemÄ“ram, GrÄmatvedÄ«ba, PÄrdoÅ¡ana",
            email: "Ja jautÄjums netiks atbildÄ“ts mutiski",
            subject: "piemÄ“ram, PatÄ“riÅ†a materiÄlu izmaksas",
            questionText: "piemÄ“ram, KÄ mÄ“s grÄmatojam raÅ¾oÅ¡anÄ izlietotos patÄ“riÅ†a materiÄlus?"
        },
        options: {
            loadingSpeakers: "â³ IelÄdÄ“ lektorus...",
            generalQuestion: "VispÄrÄ«gs jautÄjums (Visi)",
            selectSpeaker: "IzvÄ“lÄ“ties lektoru..."
        },
        charCounter: "rakstzÄ«mes", 
        submitButton: "ğŸ“¤ NosÅ«tÄ«t jautÄjumu"
    },
    sl: {
        title: "VpraÅ¡anja za Govorce",
        subtitle: "PoÅ¡ljite svoje vpraÅ¡anje",
        successMessage: "âœ… VaÅ¡e vpraÅ¡anje je bilo uspeÅ¡no poslano! Pregledali ga bodo organizatorji.",
        labels: {
            name: "Ime *",
            company: "Podjetje *",
            department: "Oddelek", 
            email: "E-poÅ¡ta",
            targetSpeaker: "VpraÅ¡anje za *",
            subject: "Zadeva *",
            question: "Besedilo vpraÅ¡anja *"
        },
        placeholders: {
            company: "Vnesite ime podjetja...",
            department: "npr. RaÄunovodstvo, Prodaja",
            email: "ÄŒe na vpraÅ¡anje ne bo odgovorjeno ustno",
            subject: "npr. StroÅ¡ki potroÅ¡nega materiala",
            questionText: "npr. Kako knjiÅ¾imo potroÅ¡ni material, ki se uporablja v proizvodnji?"
        },
        options: {
            loadingSpeakers: "â³ Nalaganje govorcev...",
            generalQuestion: "SploÅ¡no vpraÅ¡anje (Vsi)",
            selectSpeaker: "Izberite govorca..."
        },
        charCounter: "znakov", 
        submitButton: "ğŸ“¤ PoÅ¡lji vpraÅ¡anje"
    },
    et: {
        title: "KÃ¼simused Esinejatele",
        subtitle: "Saada oma kÃ¼simus",
        successMessage: "âœ… Teie kÃ¼simus on edukalt saadetud! Korraldajad vaatavad selle Ã¼le.",
        labels: {
            name: "Nimi *",
            company: "EttevÃµte *",
            department: "Osakond", 
            email: "E-post",
            targetSpeaker: "KÃ¼simus *",
            subject: "Teema *",
            question: "KÃ¼simuse tekst *"
        },
        placeholders: {
            company: "Sisestage ettevÃµtte nimi...",
            department: "nt. Raamatupidamine, MÃ¼Ã¼k",
            email: "Kui kÃ¼simusele ei vastata suuliselt",
            subject: "nt. Tarbematerjali kulud",
            questionText: "nt. Kuidas me arvestame tootmises kasutatud tarbematerjali?"
        },
        options: {
            loadingSpeakers: "â³ Esinejate laadimine...",
            generalQuestion: "Ãœldine kÃ¼simus (KÃµik)",
            selectSpeaker: "Vali esineja..."
        },
        charCounter: "mÃ¤rki", 
        submitButton: "ğŸ“¤ Saada kÃ¼simus"
    },
    fi: {
        title: "KysymyksiÃ¤ Puhujille",
        subtitle: "LÃ¤hetÃ¤ kysymyksesi",
        successMessage: "âœ… Kysymyksesi on lÃ¤hetetty onnistuneesti! JÃ¤rjestÃ¤jÃ¤t tarkistavat sen.",
        labels: {
            name: "Nimi *",
            company: "Yritys *",
            department: "Osasto",
            email: "SÃ¤hkÃ¶posti",
            targetSpeaker: "Kysymys *",
            subject: "Aihe *",
            question: "Kysymyksen teksti *"
        },
        placeholders: {
            company: "SyÃ¶tÃ¤ yrityksen nimi...",
            department: "esim. Kirjanpito, Myynti",
            email: "Jos kysymykseen ei vastata suullisesti",
            subject: "esim. Kulutustarvikkeiden kustannukset",
            questionText: "esim. Miten laskemme tuotannossa kÃ¤ytetyt kulutustarvikkeet?"
        },
        options: {
            loadingSpeakers: "â³ Ladataan puhujia...",
            generalQuestion: "Yleinen kysymys (Kaikki)",
            selectSpeaker: "Valitse puhuja..."
        },
        charCounter: "merkkiÃ¤",
        submitButton: "ğŸ“¤ LÃ¤hetÃ¤ kysymys"
    },
    sv: {
        title: "FrÃ¥gor till Talare",
        subtitle: "Skicka din frÃ¥ga",
        successMessage: "âœ… Din frÃ¥ga har skickats framgÃ¥ngsrikt! OrganisatÃ¶rerna kommer att granska den.",
        labels: {
            name: "Namn *",
            company: "FÃ¶retag *",
            department: "Avdelning",
            email: "E-post",
            targetSpeaker: "FrÃ¥ga *",
            subject: "Ã„mne *",
            question: "FrÃ¥getexten *"
        },
        placeholders: {
            company: "Ange fÃ¶retagsnamn...",
            department: "t.ex. Redovisning, FÃ¶rsÃ¤ljning",
            email: "Om frÃ¥gan inte besvaras muntligt",
            subject: "t.ex. FÃ¶rbrukningskostnader",
            questionText: "t.ex. Hur rÃ¤knar vi fÃ¶rbrukningsmaterial som anvÃ¤nds i produktionen?"
        },
        options: {
            loadingSpeakers: "â³ Laddar talare...",
            generalQuestion: "AllmÃ¤n frÃ¥ga (Alla)",
            selectSpeaker: "VÃ¤lj talare..."
        },
        charCounter: "tecken",
        submitButton: "ğŸ“¤ Skicka frÃ¥ga"
    },
    cs: {
        title: "OtÃ¡zky pro Å˜eÄnÃ­ky",
        subtitle: "PoÅ¡lete svou otÃ¡zku",
        successMessage: "âœ… VaÅ¡e otÃ¡zka byla ÃºspÄ›Å¡nÄ› odeslÃ¡na! OrganizÃ¡toÅ™i ji zkontrolujÃ­.",
        labels: {
            name: "JmÃ©no *",
            company: "SpoleÄnost *",
            department: "OddÄ›lenÃ­",
            email: "E-mail",
            targetSpeaker: "OtÃ¡zka *",
            subject: "TÃ©ma *",
            question: "Text otÃ¡zky *"
        },
        placeholders: {
            company: "Zadejte nÃ¡zev spoleÄnosti...",
            department: "napÅ™. ÃšÄetnictvÃ­, Prodej",
            email: "Pokud otÃ¡zka nebude zodpovÄ›zena ÃºstnÄ›",
            subject: "napÅ™. NÃ¡klady na spotÅ™ebnÃ­ materiÃ¡l",
            questionText: "napÅ™. Jak ÃºÄtujeme spotÅ™ebnÃ­ materiÃ¡l pouÅ¾Ã­vanÃ½ ve vÃ½robÄ›?"
        },
        options: {
            loadingSpeakers: "â³ NaÄÃ­tÃ¡nÃ­ Å™eÄnÃ­kÅ¯...",
            generalQuestion: "ObecnÃ¡ otÃ¡zka (VÅ¡ichni)",
            selectSpeaker: "Vyberte Å™eÄnÃ­ka..."
        },
        charCounter: "znakÅ¯",
        submitButton: "ğŸ“¤ Odeslat otÃ¡zku"
    },
    hu: {
        title: "KÃ©rdÃ©sek az ElÅ‘adÃ³khoz",
        subtitle: "KÃ¼ldje el kÃ©rdÃ©sÃ©t",
        successMessage: "âœ… A kÃ©rdÃ©se sikeresen elkÃ¼ldve! A szervezÅ‘k Ã¡tnÃ©zik.",
        labels: {
            name: "NÃ©v *",
            company: "VÃ¡llalat *",
            department: "RÃ©szleg",
            email: "E-mail",
            targetSpeaker: "KÃ©rdÃ©s *",
            subject: "TÃ¡rgy *",
            question: "KÃ©rdÃ©s szÃ¶vege *"
        },
        placeholders: {
            company: "Adja meg a vÃ¡llalat nevÃ©t...",
            department: "pl. KÃ¶nyvelÃ©s, Ã‰rtÃ©kesÃ­tÃ©s",
            email: "Ha a kÃ©rdÃ©sre nem vÃ¡laszolnak szÃ³ban",
            subject: "pl. FogyÃ³eszkÃ¶z kÃ¶ltsÃ©gek",
            questionText: "pl. Hogyan szÃ¡moljuk el a gyÃ¡rtÃ¡sban hasznÃ¡lt fogyÃ³eszkÃ¶zÃ¶ket?"
        },
        options: {
            loadingSpeakers: "â³ ElÅ‘adÃ³k betÃ¶ltÃ©se...",
            generalQuestion: "ÃltalÃ¡nos kÃ©rdÃ©s (Mindenki)",
            selectSpeaker: "VÃ¡lasszon elÅ‘adÃ³t..."
        },
        charCounter: "karakter",
        submitButton: "ğŸ“¤ KÃ©rdÃ©s kÃ¼ldÃ©se"
    },
    lt: {
        title: "Klausimai PraneÅ¡Ä—jams",
        subtitle: "Pateikite savo klausimÄ…",
        successMessage: "âœ… JÅ«sÅ³ klausimas sÄ—kmingai pateiktas! Organizatoriai jÄ¯ perÅ¾iÅ«rÄ—s.",
        labels: {
            name: "Vardas *",
            company: "Ä®monÄ— *",
            department: "Skyrius",
            email: "El. paÅ¡tas",
            targetSpeaker: "Klausimas *",
            subject: "Tema *",
            question: "Klausimo tekstas *"
        },
        placeholders: {
            company: "Ä®veskite Ä¯monÄ—s pavadinimÄ…...",
            department: "pvz. Buhalterija, Pardavimai",
            email: "Jei Ä¯ klausimÄ… neatsakoma Å¾odÅ¾iu",
            subject: "pvz. SuvartojamÅ³jÅ³ medÅ¾iagÅ³ iÅ¡laidos",
            questionText: "pvz. Kaip apskaiÄiuojame gamyboje naudojamas suvartojamÄ…sias medÅ¾iagas?"
        },
        options: {
            loadingSpeakers: "â³ Kraunami praneÅ¡Ä—jai...",
            generalQuestion: "Bendrasis klausimas (Visi)",
            selectSpeaker: "Pasirinkite praneÅ¡Ä—jÄ…..."
        },
        charCounter: "simboliÅ³",
        submitButton: "ğŸ“¤ Pateikti klausimÄ…"
    },
    sk: {
        title: "OtÃ¡zky pre ReÄnÃ­kov",
        subtitle: "PoÅ¡lite svoju otÃ¡zku",
        successMessage: "âœ… VaÅ¡a otÃ¡zka bola ÃºspeÅ¡ne odoslanÃ¡! OrganizÃ¡tori ju skontrolujÃº.",
        labels: {
            name: "Meno *",
            company: "SpoloÄnosÅ¥ *",
            department: "Oddelenie",
            email: "E-mail",
            targetSpeaker: "OtÃ¡zka *",
            subject: "TÃ©ma *",
            question: "Text otÃ¡zky *"
        },
        placeholders: {
            company: "Zadajte nÃ¡zov spoloÄnosti...",
            department: "napr. ÃšÄtovnÃ­ctvo, Predaj",
            email: "Ak na otÃ¡zku nebude odpovedanÃ© Ãºstne",
            subject: "napr. NÃ¡klady na spotrebnÃ½ materiÃ¡l",
            questionText: "napr. Ako ÃºÄtujeme spotrebnÃ½ materiÃ¡l pouÅ¾Ã­vanÃ½ vo vÃ½robe?"
        },
        options: {
            loadingSpeakers: "â³ NaÄÃ­tavanie reÄnÃ­kov...",
            generalQuestion: "VÅ¡eobecnÃ¡ otÃ¡zka (VÅ¡etci)",
            selectSpeaker: "Vyberte reÄnÃ­ka..."
        },
        charCounter: "znakov",
        submitButton: "ğŸ“¤ OdoslaÅ¥ otÃ¡zku"
    },
    bg: {
        title: "Ğ’ÑŠĞ¿Ñ€Ğ¾ÑĞ¸ ĞºÑŠĞ¼ Ğ›ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ‚Ğµ",
        subtitle: "Ğ˜Ğ·Ğ¿Ñ€Ğ°Ñ‚ĞµÑ‚Ğµ ÑĞ²Ğ¾Ñ Ğ²ÑŠĞ¿Ñ€Ğ¾Ñ",
        successMessage: "âœ… Ğ’Ğ°ÑˆĞ¸ÑÑ‚ Ğ²ÑŠĞ¿Ñ€Ğ¾Ñ Ğ±ĞµÑˆĞµ Ğ¸Ğ·Ğ¿Ñ€Ğ°Ñ‚ĞµĞ½ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾! ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€Ğ¸Ñ‚Ğµ Ñ‰Ğµ Ğ³Ğ¾ Ğ¿Ñ€ĞµĞ³Ğ»ĞµĞ´Ğ°Ñ‚.",
        labels: {
            name: "Ğ˜Ğ¼Ğµ *",
            company: "ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ *",
            department: "ĞÑ‚Ğ´ĞµĞ»",
            email: "Ğ˜-Ğ¼ĞµĞ¹Ğ»",
            targetSpeaker: "Ğ’ÑŠĞ¿Ñ€Ğ¾Ñ *",
            subject: "Ğ¢ĞµĞ¼Ğ° *",
            question: "Ğ¢ĞµĞºÑÑ‚ Ğ½Ğ° Ğ²ÑŠĞ¿Ñ€Ğ¾ÑĞ° *"
        },
        placeholders: {
            company: "Ğ’ÑŠĞ²ĞµĞ´ĞµÑ‚Ğµ Ğ¸Ğ¼ĞµÑ‚Ğ¾ Ğ½Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸ÑÑ‚Ğ°...",
            department: "Ğ½Ğ°Ğ¿Ñ€. Ğ¡Ñ‡ĞµÑ‚Ğ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾, ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ±Ğ¸",
            email: "ĞĞºĞ¾ Ğ²ÑŠĞ¿Ñ€Ğ¾ÑÑŠÑ‚ Ğ½Ğµ Ğ±ÑŠĞ´Ğµ Ğ¾Ñ‚Ğ³Ğ¾Ğ²Ğ¾Ñ€ĞµĞ½ ÑƒÑÑ‚Ğ½Ğ¾",
            subject: "Ğ½Ğ°Ğ¿Ñ€. Ğ Ğ°Ğ·Ñ…Ğ¾Ğ´Ğ¸ Ğ·Ğ° ĞºĞ¾Ğ½ÑÑƒĞ¼Ğ°Ñ‚Ğ¸Ğ²Ğ¸",
            questionText: "Ğ½Ğ°Ğ¿Ñ€. ĞšĞ°Ğº Ğ¾Ñ‚Ñ‡Ğ¸Ñ‚Ğ°Ğ¼Ğµ ĞºĞ¾Ğ½ÑÑƒĞ¼Ğ°Ñ‚Ğ¸Ğ²Ğ¸Ñ‚Ğµ, Ğ¸Ğ·Ğ¿Ğ¾Ğ»Ğ·Ğ²Ğ°Ğ½Ğ¸ Ğ² Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾Ñ‚Ğ¾?"
        },
        options: {
            loadingSpeakers: "â³ Ğ—Ğ°Ñ€ĞµĞ¶Ğ´Ğ°Ğ½Ğµ Ğ½Ğ° Ğ»ĞµĞºÑ‚Ğ¾Ñ€Ğ¸...",
            generalQuestion: "ĞĞ±Ñ‰ Ğ²ÑŠĞ¿Ñ€Ğ¾Ñ (Ğ’ÑĞ¸Ñ‡ĞºĞ¸)",
            selectSpeaker: "Ğ˜Ğ·Ğ±ĞµÑ€ĞµÑ‚Ğµ Ğ»ĞµĞºÑ‚Ğ¾Ñ€..."
        },
        charCounter: "Ğ·Ğ½Ğ°Ñ†Ğ¸",
        submitButton: "ğŸ“¤ Ğ˜Ğ·Ğ¿Ñ€Ğ°Ñ‰Ğ°Ğ½Ğµ Ğ½Ğ° Ğ²ÑŠĞ¿Ñ€Ğ¾Ñ"
    },
    mt: {
        title: "Mistoqsijiet gÄ§all-Kelliem",
        subtitle: "IbgÄ§at il-mistoqsija tiegÄ§ek",
        successMessage: "âœ… Il-mistoqsija tiegÄ§ek intbagÄ§tet b'suÄ‹Ä‹ess! L-organizzaturi se jirreveduha.",
        labels: {
            name: "Isem *",
            company: "Kumpanija *",
            department: "Dipartiment",
            email: "E-mail",
            targetSpeaker: "Mistoqsija *",
            subject: "SuÄ¡Ä¡ett *",
            question: "Test tal-mistoqsija *"
        },
        placeholders: {
            company: "DaÄ§Ä§al l-isem tal-kumpanija...",
            department: "eÅ¼. KontabilitÃ , BejgÄ§",
            email: "Jekyll il-mistoqsija ma titwieÄ¡bx bi kliem",
            subject: "eÅ¼. SpejjeÅ¼ tal-konsumabbli",
            questionText: "eÅ¼. Kif nikkalkula l-konsumabbli uÅ¼ati fil-produzzjoni?"
        },
        options: {
            loadingSpeakers: "â³ Qed jitgÄ§abbew il-kelliem...",
            generalQuestion: "Mistoqsija Ä¡enerali (KulÄ§add)",
            selectSpeaker: "AgÄ§Å¼el kelliem..."
        },
        charCounter: "karattri",
        submitButton: "ğŸ“¤ IbgÄ§at mistoqsija"
    }
};

// Initialize i18next for Questions Form
async function initFormTranslations() {
    try {
        loadFormLanguage();
        
        await i18next.init({
            lng: currentFormLanguage,
            fallbackLng: 'el',
            resources: {
                el: { translation: formTranslations.el },
                en: { translation: formTranslations.en },
                fr: { translation: formTranslations.fr },
                de: { translation: formTranslations.de },
                es: { translation: formTranslations.es },
                it: { translation: formTranslations.it },
                da: { translation: formTranslations.da },
                uk: { translation: formTranslations.uk },
                nl: { translation: formTranslations.nl },
                pt: { translation: formTranslations.pt },
                ro: { translation: formTranslations.ro },
                hr: { translation: formTranslations.hr },
                pl: { translation: formTranslations.pl },
                lv: { translation: formTranslations.lv },
                sl: { translation: formTranslations.sl },
                et: { translation: formTranslations.et },
                fi: { translation: formTranslations.fi },
                sv: { translation: formTranslations.sv },
                cs: { translation: formTranslations.cs },
                hu: { translation: formTranslations.hu },
                lt: { translation: formTranslations.lt },
                sk: { translation: formTranslations.sk },
                bg: { translation: formTranslations.bg },
                mt: { translation: formTranslations.mt }
            },
            interpolation: {
                escapeValue: false
            }
        });

        console.log('âœ… Q-Form i18next initialized - Language:', i18next.language);
        updateFormInterface();
        updateLanguageSelector();
        
    } catch (error) {
        console.error('âŒ Q-Form i18next initialization failed:', error);
    }
}

// Update form interface language
function updateFormInterface() {
    console.log('ğŸ”„ Updating Q-Form interface language to:', i18next.language);
    
    // Update document title
    document.title = i18next.t('title');
    
    // Update elements with data-i18n attributes
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = i18next.t(key);
        
        // Debug logging
        if (translation === key) {
            console.warn(`Q-Form translation missing for key: ${key}`);
        }
        
        element.textContent = translation;
    });
    
    // Update elements with data-i18n-placeholder attributes
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        const translation = i18next.t(key);
        
        // Debug logging
        if (translation === key) {
            console.warn(`Q-Form placeholder translation missing for key: ${key}`);
        }
        
        element.placeholder = translation;
    });
}

// Update language selector visual state
function updateLanguageSelector() {
    document.querySelectorAll('.lang-flag').forEach(flag => {
        const lang = flag.getAttribute('data-lang');
        if (lang === i18next.language) {
            flag.style.opacity = '1';
            flag.style.transform = 'scale(1.1)';
        } else {
            flag.style.opacity = '0.7';
            flag.style.transform = 'scale(1)';
        }
    });
}

// Switch language function
function switchLanguage(lang) {
    console.log('ğŸŒ Q-Form Language changing to:', lang);
    currentFormLanguage = lang;
    saveFormLanguage(lang);
    
    i18next.changeLanguage(lang).then(() => {
        updateFormInterface();
        updateLanguageSelector();
        // Reload speakers dropdown to update language
        loadSpeakers();
        console.log(`âœ… Q-Form language changed to: ${lang}`);
    }).catch(error => {
        console.error('âŒ Error changing Q-Form language:', error);
    });
}

// Initialize on DOM load
document.addEventListener('DOMContentLoaded', function() {
    initFormTranslations();
});

// Add hover effects to language flags
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.lang-flag').forEach(flag => {
        flag.addEventListener('mouseenter', function() {
            if (this.getAttribute('data-lang') !== i18next.language) {
                this.style.opacity = '1';
            }
        });
        
        flag.addEventListener('mouseleave', function() {
            if (this.getAttribute('data-lang') !== i18next.language) {
                this.style.opacity = '0.7';
            }
        });
    });
});
</script>
    
</body>
</html>